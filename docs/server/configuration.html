<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9e615eff0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Centrifugo Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Centrifugo Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-204787498-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Configure Centrifugo | Centrifugo</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://centrifugal.dev/docs/server/configuration"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Configure Centrifugo | Centrifugo"><meta data-react-helmet="true" name="description" content="Let&#x27;s look at how Centrifugo can be configured."><meta data-react-helmet="true" property="og:description" content="Let&#x27;s look at how Centrifugo can be configured."><meta data-react-helmet="true" property="og:image" content="https://centrifugal.dev/img/centrifugo_soc.png"><meta data-react-helmet="true" name="twitter:image" content="https://centrifugal.dev/img/centrifugo_soc.png"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://centrifugal.dev/docs/server/configuration"><link data-react-helmet="true" rel="alternate" href="https://centrifugal.dev/docs/server/configuration" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://centrifugal.dev/docs/server/configuration" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c4938082.css">
<link rel="preload" href="/assets/js/runtime~main.fca33e31.js" as="script">
<link rel="preload" href="/assets/js/main.e5b011b7.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Centrifugo</b></a><a class="navbar__item navbar__link" href="/docs/getting-started/introduction">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/server/configuration">Server guide</a><a class="navbar__item navbar__link" href="/docs/transports/overview">Transports</a><a class="navbar__item navbar__link" href="/docs/ecosystem/client">Ecosystem</a><a class="navbar__item navbar__link" href="/docs/pro/overview">Centrifugo PRO</a><a class="navbar__item navbar__link" href="/docs/faq/index">FAQ</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/centrifugal/centrifugo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedImage_1VuW themedImage--dark_hz6m"><b>Centrifugo</b></a><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/server/configuration">Configure Centrifugo</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/console_commands">Console commands</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/server_api">Server API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/authentication">Client authentication</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/channels">Channels</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/private_channels">Private channels</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/server_subs">Server-side subscriptions</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/engines">Engines, scalability</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/proxy">Proxy to backend</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/history_and_recovery">History and recovery</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/admin_web">Admin web UI</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/monitoring">Monitoring</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/infra_tuning">Infrastructure tuning</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/load_balancing">Load Balancing</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/tls">Configure TLS</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server/codes">Error and disconnect codes</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Configure Centrifugo</h1></header><p>Let&#x27;s look at how Centrifugo can be configured.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>There are more options</h5></div><div class="admonition-content"><p>This chapter describes configuration principles and some important configuration options. There are some options not mentioned here but described later in each feature documentation.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="configuration-sources"></a>Configuration sources<a class="hash-link" href="#configuration-sources" title="Direct link to heading">#</a></h2><p>Centrifugo can be configured in several ways.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="command-line-flags"></a>Command-line flags<a class="hash-link" href="#command-line-flags" title="Direct link to heading">#</a></h3><p>Centrifugo supports several command-line flags. See <code>centrifugo -h</code> for available flags. Command-line flags limited to most frequently used. In general, we suggest to avoid using flags for configuring Centrifugo in a production environment â€“ prefer environment or configuration file sources.</p><p>Command-line options have the highest priority when set than other ways to configure Centrifugo.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="os-environment-variables"></a>OS environment variables<a class="hash-link" href="#os-environment-variables" title="Direct link to heading">#</a></h3><p>All Centrifugo options can be set over env in the format <code>CENTRIFUGO_&lt;OPTION_NAME&gt;</code> (i.e. option name with <code>CENTRIFUGO_</code> prefix, all in uppercase).</p><p>Setting options over env is mostly straightforward except namespaces â€“ <a href="#setting-namespaces-over-env">see how to set namespaces via env</a>. Environment variables have the second priority after flags.</p><p>Boolean options can be set using strings according to Go language <a href="https://pkg.go.dev/strconv#ParseBool" target="_blank" rel="noopener noreferrer">ParseBool</a> function. I.e. to set <code>true</code> you can just use <code>&quot;true&quot;</code> value for an environment variable (or simply <code>&quot;1&quot;</code>). To set <code>false</code> use <code>&quot;false&quot;</code> or <code>&quot;0&quot;</code>. Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CENTRIFUGO_PROMETHEUS</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Also, array options, like <code>allowed_origins</code> can be set over environment variables as a single string where values separated by a space. For example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CENTRIFUGO_ALLOWED_ORIGINS</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://mysite1.example.com https://mysite2.example.com&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For a nested object configuration (which we have, for example, in <a href="/docs/pro/analytics">Centrifugo PRO ClickHouse analytics</a>) it&#x27;s still possible to use environment variables to set options. In this case replace nesting with <code>_</code> when constructing environment variable name.</p><p>Empty environment variables are considered unset (!) and will fall back to the next configuration source.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="configuration-file"></a>Configuration file<a class="hash-link" href="#configuration-file" title="Direct link to heading">#</a></h3><p>Configuration file supports all options mentioned in Centrifugo documentation and can be in one of three supported formats: JSON, YAML, or TOML. Config file options have the lowest priority among configuration sources (i.e. option set over environment variable prevails over the same option in config file).</p><p>A simple way to start with Centrifugo is to run:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">centrifugo genconfig</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This command generates <code>config.json</code> configuration file in a current directory. This file already has the minimal number of options set. So it&#x27;s then possible to start Centrifugo:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">centrifugo -c config.json</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="config-file-formats"></a>Config file formats<a class="hash-link" href="#config-file-formats" title="Direct link to heading">#</a></h2><p>Centrifugo supports three configuration file formats: JSON, YAML, or TOML.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="json-config-format"></a>JSON config format<a class="hash-link" href="#json-config-format" title="Direct link to heading">#</a></h3><p>Here is an example of Centrifugo JSON configuration file:</p><div class="codeBlockContainer_K1bP"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">config.json</div><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;allowed_origins&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://localhost:3000&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;token_hmac_secret_key&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;YOUR-SECRET-STRING-HERE&gt;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;api_key&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;YOUR-API-KEY-HERE&gt;&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>token_hmac_secret_key</code> used to check JWT signature (more info about JWT in <a href="/docs/server/authentication">authentication chapter</a>). If you are using <a href="/docs/server/proxy#connect-proxy">connect proxy</a> then you may use Centrifugo without JWT.</p><p><code>api_key</code> used for Centrifugo API endpoint authorization, see more in <a href="/docs/server/server_api#http-api">chapter about server HTTP API</a>. Keep both values secret and never reveal them to clients.</p><p><code>allowed_origins</code> option <a href="#allowed_origins">described below</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="toml-config-format"></a>TOML config format<a class="hash-link" href="#toml-config-format" title="Direct link to heading">#</a></h3><p>Centrifugo also supports TOML format for configuration file:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">centrifugo --config</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">config.toml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Where <code>config.toml</code> contains:</p><div class="codeBlockContainer_K1bP"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">config.toml</div><div class="codeBlockContent_hGly toml"><pre tabindex="0" class="prism-code language-toml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">allowed_origins: [ &quot;http://localhost:3000&quot; ]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">token_hmac_secret_key = &quot;&lt;YOUR-SECRET-STRING-HERE&gt;&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">api_key = &quot;&lt;YOUR-API-KEY-HERE&gt;&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">log_level = &quot;debug&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In the example above we also defined logging level to be <code>debug</code> which is useful to have while developing an application. In the production environment debug logging can be too chatty.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="yaml-config-format"></a>YAML config format<a class="hash-link" href="#yaml-config-format" title="Direct link to heading">#</a></h3><p>YAML format is also supported:</p><div class="codeBlockContainer_K1bP"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">config.yaml</div><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">allowed_origins</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://localhost:3000&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">token_hmac_secret_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;YOUR-SECRET-STRING-HERE&gt;&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">api_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;YOUR-API-KEY-HERE&gt;&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">log_level</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> debug</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>With YAML remember to use spaces, not tabs when writing a configuration file.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="important-options"></a>Important options<a class="hash-link" href="#important-options" title="Direct link to heading">#</a></h2><p>Let&#x27;s describe some important options you can configure when running Centrifugo.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="allowed_origins"></a>allowed_origins<a class="hash-link" href="#allowed_origins" title="Direct link to heading">#</a></h3><p>This option allows setting an array of allowed origin patterns (array of strings) for WebSocket and SockJS endpoints to prevent <a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery" target="_blank" rel="noopener noreferrer">CSRF</a> or WebSocket hijacking attacks. Also, it&#x27;s used for HTTP-based unidirectional transports to enable CORS for configured origins.</p><p>As soon as <code>allowed_origins</code> is defined every connection request with <code>Origin</code> set will be checked against each pattern in an array.</p><p>Connection requests without <code>Origin</code> header set are passing through without any checks (i.e. always allowed).</p><p>For example, a client connects to Centrifugo from a web browser application on <code>http://localhost:3000</code>. In this case, <code>allowed_origins</code> should be configured in this way:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;allowed_origins&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://localhost:3000&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>When connecting from <code>https://example.com</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;allowed_origins&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://example.com&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Origin pattern can contain wildcard symbol <code>*</code> to match subdomains:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;allowed_origins&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://*.example.com&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>â€“ in this case requests with <code>Origin</code> header like <code>https://foo.example.com</code> or <code>https://bar.example.com</code> will pass the check.</p><p>It&#x27;s also possible to allow all origins in the following way (but this is discouraged and insecure when using connect proxy feature):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;allowed_origins&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;*&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="address"></a>address<a class="hash-link" href="#address" title="Direct link to heading">#</a></h3><p>Bind your Centrifugo to a specific interface address (string, by default <code>&quot;&quot;</code> - listen on all available interfaces).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="port"></a>port<a class="hash-link" href="#port" title="Direct link to heading">#</a></h3><p>Port to bind Centrifugo to (string, by default <code>&quot;8000&quot;</code>).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="engine"></a>engine<a class="hash-link" href="#engine" title="Direct link to heading">#</a></h3><p>Engine to use - <code>memory</code>, <code>redis</code> or <code>tarantool</code>. It&#x27;s a string option, by default <code>memory</code>. Read more about engines in <a href="/docs/server/engines">special chapter</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="advanced-options"></a>Advanced options<a class="hash-link" href="#advanced-options" title="Direct link to heading">#</a></h2><p>These options allow tweaking server behavior, in most cases default values are good to start with. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="client_channel_limit"></a>client_channel_limit<a class="hash-link" href="#client_channel_limit" title="Direct link to heading">#</a></h3><p>Default: 128</p><p>Sets the maximum number of different channel subscriptions a single client can have. Having many channels per client is not a good thing since this increases connection establishment time. In most cases, you should design your app to use only several channels per client.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="channel_max_length"></a>channel_max_length<a class="hash-link" href="#channel_max_length" title="Direct link to heading">#</a></h3><p>Default: 255</p><p>Sets the maximum length of the channel name.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="client_user_connection_limit"></a>client_user_connection_limit<a class="hash-link" href="#client_user_connection_limit" title="Direct link to heading">#</a></h3><p>Default: 0</p><p>The maximum number of connections from a user (with known user ID) to Centrifugo node. By default, unlimited.</p><p>The important thing to emphasize is that <code>client_user_connection_limit</code> works only per one Centrifugo node and exists mostly to protect Centrifugo from many connections from a single user â€“ but not for business logic limitations. This means that if you set this to 1 and scale nodes â€“ say run 10 Centrifugo nodes â€“ then a user will be able to create 10 connections (one to each node).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="client_queue_max_size"></a>client_queue_max_size<a class="hash-link" href="#client_queue_max_size" title="Direct link to heading">#</a></h3><p>Default: 1048576</p><p>Maximum client message queue size in bytes to close slow reader connections. By default - 1mb.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="client_anonymous"></a>client_anonymous<a class="hash-link" href="#client_anonymous" title="Direct link to heading">#</a></h3><p>Default: false</p><p>Enable a mode when all clients can connect to Centrifugo without JWT. In this case, all connections without a token will be treated as anonymous (i.e. with empty user ID) and only can subscribe to channels with <code>anonymous</code> option enabled.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="client_concurrency"></a>client_concurrency<a class="hash-link" href="#client_concurrency" title="Direct link to heading">#</a></h3><p>Default: 0</p><p><code>client_concurrency</code> when set tells Centrifugo that commands from a client must be processed concurrently.</p><p>By default, concurrency disabled â€“ Centrifugo processes commands received from a client one by one. This means that if a client issues two RPC requests to a server then Centrifugo will process the first one, then the second one. If the first RPC call is slow then the client will wait for the second RPC response much longer than it could (even if the second RPC is very fast). If you set <code>client_concurrency</code> to some value greater than 1 then commands will be processed concurrently (in parallel) in separate goroutines (with maximum concurrency level capped by <code>client_concurrency</code> value). Thus, this option can effectively reduce the latency of individual requests. Since separate goroutines are involved in processing this mode adds some performance and memory overhead â€“ though it should be pretty negligible in most cases. This option applies to all commands from a client (including subscribe, publish, presence, etc).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="gomaxprocs"></a>gomaxprocs<a class="hash-link" href="#gomaxprocs" title="Direct link to heading">#</a></h3><p>Default: 0</p><p>By default, Centrifugo runs on all available CPU cores. To limit the number of cores Centrifugo can utilize in one moment use this option.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="endpoint-configuration"></a>Endpoint configuration.<a class="hash-link" href="#endpoint-configuration" title="Direct link to heading">#</a></h2><p>After Centrifugo started there are several endpoints available.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="default-endpoints"></a>Default endpoints.<a class="hash-link" href="#default-endpoints" title="Direct link to heading">#</a></h3><p>Bidirectional WebSocket default endpoint:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ws://localhost:8000/connection/websocket</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Bidirectional SockJS default endpoint (disabled by default):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">http://localhost:8000/connection/sockjs</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Unidirectional EventSource endpoint (disabled by default):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">http://localhost:8000/connection/uni_sse</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Unidirectional HTTP streaming endpoint (disabled by default):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">http://localhost:8000/connection/uni_http_stream</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Unidirectional WebSocket endpoint (disabled by default):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">http://localhost:8000/connection/uni_websocket</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Unidirectional EventSource (SSE) endpoint (disabled by default):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">http://localhost:8000/connection/uni_sse</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Server HTTP API endpoint:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">http://localhost:8000/api</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>By default, all endpoints work on port <code>8000</code>. This can be changed with <code>port</code> option:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;port&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">9000</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In production setup, you may have a proper domain name in endpoint addresses above instead of <code>localhost</code>. While domain name and port parts can differ depending on setup â€“ URL paths stay the same: <code>/connection/sockjs</code>, <code>/connection/websocket</code>, <code>/api</code> etc.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="admin-endpoints"></a>Admin endpoints.<a class="hash-link" href="#admin-endpoints" title="Direct link to heading">#</a></h3><p>Admin web UI endpoint works on root path by default, i.e. <code>http://localhost:8000</code>.</p><p>For more details about admin web UI, refer to the <a href="/docs/server/admin_web">Admin web UI documentation</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="debug-endpoints"></a>Debug endpoints.<a class="hash-link" href="#debug-endpoints" title="Direct link to heading">#</a></h3><p>Next, when Centrifugo started in debug mode some extra debug endpoints become available. To start in debug mode add <code>debug</code> option to config:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;debug&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And endpoint:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">http://localhost:8000/debug/pprof/</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>â€“ will show useful information about the internal state of Centrifugo instance. This info is especially helpful when troubleshooting. See <a href="https://github.com/centrifugal/centrifugo/wiki/Investigating-performance-issues" target="_blank" rel="noopener noreferrer">wiki page</a> for more info.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="health-check-endpoint"></a>Health check endpoint<a class="hash-link" href="#health-check-endpoint" title="Direct link to heading">#</a></h3><p>Use <code>health</code> boolean option (by default <code>false</code>) to enable the health check endpoint which will be available on path <code>/health</code>. Also available over command-line flag:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">centrifugo -c config.json --health</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="custom-internal-ports"></a>Custom internal ports<a class="hash-link" href="#custom-internal-ports" title="Direct link to heading">#</a></h3><p>We strongly recommend not expose API, admin, debug, health, and Prometheus endpoints to the Internet. The following Centrifugo endpoints are considered internal:</p><ul><li>API endpoint (<code>/api</code>) - for HTTP API requests</li><li>Admin web interface endpoints (<code>/</code>, <code>/admin/auth</code>, <code>/admin/api</code>) - used by web interface</li><li>Prometheus endpoint (<code>/metrics</code>) - used for exposing server metrics in Prometheus format </li><li>Health check endpoint (<code>/health</code>) - used to do health checks</li><li>Debug endpoints (<code>/debug/pprof</code>) - used to inspect internal server state</li></ul><p>It&#x27;s a good practice to protect all these endpoints with a firewall. For example, it&#x27;s possible to configure in <code>location</code> section of the Nginx configuration.</p><p>Though sometimes you don&#x27;t have access to a per-location configuration in your proxy/load balancer software. For example when using Amazon ELB. In this case, you can change ports on which your internal endpoints work.</p><p>To run internal endpoints on custom port use <code>internal_port</code> option:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;internal_port&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">9000</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>So admin web interface will work on address:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">http://localhost:9000</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Also, debug page will be available on a new custom port too:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">http://localhost:9000/debug/pprof/</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The same for API and Prometheus endpoints.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="disable-default-endpoints"></a>Disable default endpoints<a class="hash-link" href="#disable-default-endpoints" title="Direct link to heading">#</a></h3><p>To disable websocket endpoint set <code>websocket_disable</code> boolean option to <code>true</code>.</p><p>To disable API endpoint set <code>api_disable</code> boolean option to <code>true</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="customize-handler-endpoints"></a>Customize handler endpoints<a class="hash-link" href="#customize-handler-endpoints" title="Direct link to heading">#</a></h3><p>It&#x27;s possible to customize server HTTP handler endpoints. To do this Centrifugo supports several options:</p><ul><li><code>admin_handler_prefix</code> (default <code>&quot;&quot;</code>) - to control Admin panel URL prefix</li><li><code>websocket_handler_prefix</code> (default <code>&quot;/connection/websocket&quot;</code>) - to control WebSocket URL prefix</li><li><code>sockjs_handler_prefix</code> (default <code>&quot;/connection/sockjs&quot;</code>) - to control SockJS URL prefix</li><li><code>uni_sse_handler_prefix</code> (default <code>&quot;/connection/uni_sse&quot;</code>) - to control unidirectional Eventsource URL prefix</li><li><code>uni_http_stream_handler_prefix</code> (default <code>&quot;/connection/uni_http_stream&quot;</code>) - to control unidirectional HTTP streaming URL prefix</li><li><code>uni_websocket_handler_prefix</code> (default <code>&quot;/connection/uni_websocket&quot;</code>) - to control unidirectional WebSocket URL prefix</li><li><code>api_handler_prefix</code> (default <code>&quot;/api&quot;</code>) - to control HTTP API URL prefix</li><li><code>prometheus_handler_prefix</code> (default <code>&quot;/metrics&quot;</code>) - to control Prometheus URL prefix</li><li><code>health_handler_prefix</code> (default <code>&quot;/health&quot;</code>) - to control health check URL prefix</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="signal-handling"></a>Signal handling<a class="hash-link" href="#signal-handling" title="Direct link to heading">#</a></h2><p>It&#x27;s possible to send HUP signal to Centrifugo to reload a configuration:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">kill</span><span class="token plain"> -HUP </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">PID</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Though at moment <strong>this will only reload token secrets and channel options (top-level and namespaces)</strong>.</p><p>Centrifugo tries to gracefully shut down client connections when SIGINT or SIGTERM signals are received. By default, the maximum graceful shutdown period is 30 seconds but can be changed using <code>shutdown_timeout</code> (integer, in seconds) configuration option.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="insecure-modes"></a>Insecure modes<a class="hash-link" href="#insecure-modes" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="insecure-client-connection"></a>Insecure client connection<a class="hash-link" href="#insecure-client-connection" title="Direct link to heading">#</a></h3><p>The boolean option <code>client_insecure</code> (default <code>false</code>) allows connecting to Centrifugo without JWT token. In this mode, there is no user authentication involved. This mode can be useful for demo projects based on Centrifugo, local projects, or real-time application prototyping. Don&#x27;t use it in production.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="insecure-api-mode"></a>Insecure API mode<a class="hash-link" href="#insecure-api-mode" title="Direct link to heading">#</a></h3><p>This mode can be enabled using the boolean option <code>api_insecure</code> (default <code>false</code>). When on there is no need to provide API key in HTTP requests. When using this mode everyone that has access to <code>/api</code> endpoint can send any command to server. Enabling this option can be reasonable if <code>/api</code> endpoint is protected by firewall rules.</p><p>The option is also useful in development to simplify sending API commands to Centrifugo using CURL for example without specifying <code>Authorization</code> header in requests.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="insecure-admin-mode"></a>Insecure admin mode<a class="hash-link" href="#insecure-admin-mode" title="Direct link to heading">#</a></h3><p>This mode can be enabled using the boolean option <code>admin_insecure</code> (default <code>false</code>). When on there is no authentication in the admin web interface. Again - this is not secure but can be justified if you protected the admin interface by firewall rules or you want to use basic authentication for the Centrifugo admin interface (configured on proxy level).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="setting-time-duration-options"></a>Setting time duration options<a class="hash-link" href="#setting-time-duration-options" title="Direct link to heading">#</a></h2><p>Time durations in Centrifugo can be set using strings where duration value and unit are both provided. For example, to set 5 seconds duration use <code>&quot;5s&quot;</code>.</p><p>The minimal time resolution is 1ms. Some options of Centrifugo only support second precision (for example <code>history_ttl</code> channel option).</p><p>Valid time units are &quot;ms&quot; (milliseconds), &quot;s&quot; (seconds), &quot;m&quot; (minutes), &quot;h&quot; (hours).</p><p>Some examples:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">&quot;1000ms&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 1000 milliseconds</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1s&quot;</span><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 1 second</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token string" style="color:rgb(195, 232, 141)">&quot;12h&quot;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 12 hours</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token string" style="color:rgb(195, 232, 141)">&quot;720h&quot;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 30 days</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="setting-namespaces-over-env"></a>Setting namespaces over env<a class="hash-link" href="#setting-namespaces-over-env" title="Direct link to heading">#</a></h2><p>While setting most options in Centrifugo over env is pretty straightforward setting namespaces is a bit special:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><pre tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CENTRIFUGO_NAMESPACES=&#x27;[{&quot;name&quot;: &quot;ns1&quot;}, {&quot;name&quot;: &quot;ns2&quot;}]&#x27; ./centrifugo</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>I.e. <code>CENTRIFUGO_NAMESPACES</code> environment variable should be a valid JSON string that represents namespaces array.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/centrifugal/centrifugal.dev/edit/main/docs/server/configuration.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/server/console_commands"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Console commands Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration-sources" class="table-of-contents__link">Configuration sources</a><ul><li><a href="#command-line-flags" class="table-of-contents__link">Command-line flags</a></li><li><a href="#os-environment-variables" class="table-of-contents__link">OS environment variables</a></li><li><a href="#configuration-file" class="table-of-contents__link">Configuration file</a></li></ul></li><li><a href="#config-file-formats" class="table-of-contents__link">Config file formats</a><ul><li><a href="#json-config-format" class="table-of-contents__link">JSON config format</a></li><li><a href="#toml-config-format" class="table-of-contents__link">TOML config format</a></li><li><a href="#yaml-config-format" class="table-of-contents__link">YAML config format</a></li></ul></li><li><a href="#important-options" class="table-of-contents__link">Important options</a><ul><li><a href="#allowed_origins" class="table-of-contents__link">allowed_origins</a></li><li><a href="#address" class="table-of-contents__link">address</a></li><li><a href="#port" class="table-of-contents__link">port</a></li><li><a href="#engine" class="table-of-contents__link">engine</a></li></ul></li><li><a href="#advanced-options" class="table-of-contents__link">Advanced options</a><ul><li><a href="#client_channel_limit" class="table-of-contents__link">client_channel_limit</a></li><li><a href="#channel_max_length" class="table-of-contents__link">channel_max_length</a></li><li><a href="#client_user_connection_limit" class="table-of-contents__link">client_user_connection_limit</a></li><li><a href="#client_queue_max_size" class="table-of-contents__link">client_queue_max_size</a></li><li><a href="#client_anonymous" class="table-of-contents__link">client_anonymous</a></li><li><a href="#client_concurrency" class="table-of-contents__link">client_concurrency</a></li><li><a href="#gomaxprocs" class="table-of-contents__link">gomaxprocs</a></li></ul></li><li><a href="#endpoint-configuration" class="table-of-contents__link">Endpoint configuration.</a><ul><li><a href="#default-endpoints" class="table-of-contents__link">Default endpoints.</a></li><li><a href="#admin-endpoints" class="table-of-contents__link">Admin endpoints.</a></li><li><a href="#debug-endpoints" class="table-of-contents__link">Debug endpoints.</a></li><li><a href="#health-check-endpoint" class="table-of-contents__link">Health check endpoint</a></li><li><a href="#custom-internal-ports" class="table-of-contents__link">Custom internal ports</a></li><li><a href="#disable-default-endpoints" class="table-of-contents__link">Disable default endpoints</a></li><li><a href="#customize-handler-endpoints" class="table-of-contents__link">Customize handler endpoints</a></li></ul></li><li><a href="#signal-handling" class="table-of-contents__link">Signal handling</a></li><li><a href="#insecure-modes" class="table-of-contents__link">Insecure modes</a><ul><li><a href="#insecure-client-connection" class="table-of-contents__link">Insecure client connection</a></li><li><a href="#insecure-api-mode" class="table-of-contents__link">Insecure API mode</a></li><li><a href="#insecure-admin-mode" class="table-of-contents__link">Insecure admin mode</a></li></ul></li><li><a href="#setting-time-duration-options" class="table-of-contents__link">Setting time duration options</a></li><li><a href="#setting-namespaces-over-env" class="table-of-contents__link">Setting namespaces over env</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Contacts</div><ul class="footer__items"><li class="footer__item"><a href="mailto:centrifugal.dev@gmail.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Send e-mail</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/centrifugal/centrifugo/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/joinchat/U57MI8Lam9mhpuhd" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/tYgADKx" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/attributions">Attributions</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Centrifugal.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fca33e31.js"></script>
<script src="/assets/js/main.e5b011b7.js"></script>
</body>
</html>